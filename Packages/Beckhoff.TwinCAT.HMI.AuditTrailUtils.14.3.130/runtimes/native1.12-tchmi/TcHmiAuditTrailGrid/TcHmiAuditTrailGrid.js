"use strict";var TcHmi,__runInitializers=this&&this.__runInitializers||function(thisArg,initializers,value){for(var useValue=arguments.length>2,i=0;i<initializers.length;i++)value=useValue?initializers[i].call(thisArg,value):initializers[i].call(thisArg);return useValue?value:void 0},__esDecorate=this&&this.__esDecorate||function(ctor,descriptorIn,decorators,contextIn,initializers,extraInitializers){function accept(f){if(void 0!==f&&"function"!=typeof f)throw new TypeError("Function expected");return f}for(var _,kind=contextIn.kind,key="getter"===kind?"get":"setter"===kind?"set":"value",target=!descriptorIn&&ctor?contextIn.static?ctor:ctor.prototype:null,descriptor=descriptorIn||(target?Object.getOwnPropertyDescriptor(target,contextIn.name):{}),done=!1,i=decorators.length-1;i>=0;i--){var context={};for(var p in contextIn)context[p]="access"===p?{}:contextIn[p];for(var p in contextIn.access)context.access[p]=contextIn.access[p];context.addInitializer=function(f){if(done)throw new TypeError("Cannot add initializers after decoration has completed");extraInitializers.push(accept(f||null))};var result=(0,decorators[i])("accessor"===kind?{get:descriptor.get,set:descriptor.set}:descriptor[key],context);if("accessor"===kind){if(void 0===result)continue;if(null===result||"object"!=typeof result)throw new TypeError("Object expected");(_=accept(result.get))&&(descriptor.get=_),(_=accept(result.set))&&(descriptor.set=_),(_=accept(result.init))&&initializers.unshift(_)}else(_=accept(result))&&("field"===kind?initializers.unshift(_):descriptor[key]=_)}target&&Object.defineProperty(target,contextIn.name,descriptor),done=!0};!function(TcHmi){!function(Controls){!function(Beckhoff){!function(AuditTrailUtils){let TcHmiAuditTrailGrid=(()=>{let ___onSelectedItemChanged_decorators,___onFilterPressed_decorators,___onExportPressed_decorators,___onDoubleclick_decorators,___onTouchStart_decorators,___onDatagridPropertyChanged_decorators,___onResolverForColumnsWatchCallback_decorators,_classSuper=TcHmi.Controls.System.TcHmiControl,_instanceExtraInitializers=[];return class TcHmiAuditTrailGrid extends _classSuper{static{const _metadata="function"==typeof Symbol&&Symbol.metadata?Object.create(_classSuper[Symbol.metadata]??null):void 0;___onSelectedItemChanged_decorators=[TcHmi.EventHandler()],___onFilterPressed_decorators=[TcHmi.EventHandler({checkIsEnabled:!0,checkAccess:"configure"})],___onExportPressed_decorators=[TcHmi.EventHandler({checkIsEnabled:!0,checkAccess:"operate"})],___onDoubleclick_decorators=[TcHmi.EventHandler({checkIsEnabled:!0,checkAccess:"viewDetails"})],___onTouchStart_decorators=[TcHmi.EventHandler({checkIsEnabled:!0,checkAccess:"viewDetails"})],___onDatagridPropertyChanged_decorators=[TcHmi.EventHandler()],___onResolverForColumnsWatchCallback_decorators=[TcHmi.CallbackMethod],__esDecorate(this,null,___onSelectedItemChanged_decorators,{kind:"method",name:"__onSelectedItemChanged",static:!1,private:!1,access:{has:obj=>"__onSelectedItemChanged"in obj,get:obj=>obj.__onSelectedItemChanged},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onFilterPressed_decorators,{kind:"method",name:"__onFilterPressed",static:!1,private:!1,access:{has:obj=>"__onFilterPressed"in obj,get:obj=>obj.__onFilterPressed},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onExportPressed_decorators,{kind:"method",name:"__onExportPressed",static:!1,private:!1,access:{has:obj=>"__onExportPressed"in obj,get:obj=>obj.__onExportPressed},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onDoubleclick_decorators,{kind:"method",name:"__onDoubleclick",static:!1,private:!1,access:{has:obj=>"__onDoubleclick"in obj,get:obj=>obj.__onDoubleclick},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onTouchStart_decorators,{kind:"method",name:"__onTouchStart",static:!1,private:!1,access:{has:obj=>"__onTouchStart"in obj,get:obj=>obj.__onTouchStart},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onDatagridPropertyChanged_decorators,{kind:"method",name:"__onDatagridPropertyChanged",static:!1,private:!1,access:{has:obj=>"__onDatagridPropertyChanged"in obj,get:obj=>obj.__onDatagridPropertyChanged},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onResolverForColumnsWatchCallback_decorators,{kind:"method",name:"__onResolverForColumnsWatchCallback",static:!1,private:!1,access:{has:obj=>"__onResolverForColumnsWatchCallback"in obj,get:obj=>obj.__onResolverForColumnsWatchCallback},metadata:_metadata},null,_instanceExtraInitializers),_metadata&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:_metadata})}static#tchmiFQN="TcHmi.Controls.Beckhoff."+this.name;constructor(element,pcElement,attrs){super(element,pcElement,attrs)}__elementTemplateRoot=__runInitializers(this,_instanceExtraInitializers);__elementMenuBar;__elementGridContainer;__elementExportPopupContainer;__datagrid;__filterButton;__exportButton;__filterPrompt=null;__detailsPrompt=null;__exportPrompt=null;__exportFormatCombobox;__exportLimitNumeric;__exportLimitCheckbox;__exportOffsetNumeric;__exportOffsetCheckbox;__exportOrderByInput;__exportOrderByCheckbox;__exportFilterText;__exportFilterButton;__exportFilter=[];__columns;__serverInterval;__allowDetailsPopup;__showMenuBar;__menuBarPosition;__buttonFontFamily;__buttonFontSize;__buttonFontSizeUnit;__buttonFontStyle;__buttonFontWeight;__buttonHeight;__ignoreEscapeSequences;__localizedElements=new Map;__localizationReader=void 0;__subscriptionId=null;__lastReportedErrorDetail;__doubletapStartTime=0;__initializedAttributes=[];__previnit(){if(this.__elementTemplateRoot=this.__element.find(".TcHmi_Controls_Beckhoff_AuditTrailUtils_TcHmiAuditTrailGrid-template")[0],this.__elementMenuBar=this.__elementTemplateRoot.getElementsByClassName("TcHmi_Controls_Beckhoff_AuditTrailUtils_TcHmiAuditTrailGrid-template-menu-bar")[0],this.__elementGridContainer=this.__elementTemplateRoot.getElementsByClassName("TcHmi_Controls_Beckhoff_AuditTrailUtils_TcHmiAuditTrailGrid-template-grid-container")[0],!this.__elementTemplateRoot||!this.__elementMenuBar||!this.__elementGridContainer)throw new Error("Invalid Template.html");const datagrid=TcHmi.Controls.get(this.__id+"_TcHmiDatagrid"),filterButton=TcHmi.Controls.get(this.__id+"_FilterButton"),exportButton=TcHmi.Controls.get(this.__id+"_ExportButton");if(!datagrid||!filterButton||!exportButton)throw new Error("Could not find internally created controls for TcHmiAuditTrailGrid.");this.__datagrid=datagrid,this.__filterButton=filterButton,this.__exportButton=exportButton,this.__destroyOnDestroy.push(TcHmi.EventProvider.register(`${this.__datagrid.getId()}.onPropertyChanged`,this.__onDatagridPropertyChanged));let localizedElements=this.__element[0].querySelectorAll("[data-tchmi-localized-content-key]");for(let i=0,ii=localizedElements.length;i<ii;i++){let element=localizedElements[i],localizeKey=element.dataset.tchmiLocalizedContentKey;localizeKey&&this.__localizedElements.set(element,{key:localizeKey})}this.__destroyOnDestroy.push(this.__localization.watch((data=>{if(data.error===TcHmi.Errors.NONE&&data.reader){this.__localizationReader=data.reader;for(const[element,info]of this.__localizedElements){let localizedText=data.reader.get(info.key);info.parameters&&(localizedText=tchmi_format_string(localizedText,...info.parameters)),element.textContent=tchmi_decode_control_characters(localizedText)}}}))),super.__previnit()}__init(){super.__init(),this.__elementGridContainer.append(this.__datagrid.getElement()[0]),this.__filterButton.setVirtualControlRightMappings([{controlRight:"operate",virtualControlRight:"configure"}]),this.__exportButton.setVirtualControlRightMappings([{controlRight:"operate",virtualControlRight:"export"}]),this.__datagrid.__setDataSymbolTransform((data=>(data.error??={},data.error.reason??=null,data.error.code??=null,data.payload??={},data.payload.name??=null,data.payload.domain??=null,data.payload.params??=null,data.payload.severity??=null,data.payload.timeRaised??=null,data)))}__attach(){super.__attach(),this.__setDataSymbol();this.__destroyOnDetach.push(TcHmi.EventProvider.register(this.__filterButton.getId()+".onPressed",this.__onFilterPressed),TcHmi.EventProvider.register(this.__exportButton.getId()+".onPressed",this.__onExportPressed),TcHmi.EventProvider.register(this.__datagrid.getId()+".onPropertyChanged<selectedRowValue>",this.__onSelectedItemChanged),TcHmi.EventProvider.registerDomEvent(this.__elementGridContainer,"dblclick",this.__onDoubleclick),TcHmi.EventProvider.registerDomEvent(this.__elementGridContainer,"touchstart",this.__onTouchStart,{passive:!1,capture:!1}))}__detach(){super.__detach(),this.__setDataSymbol()}destroy(){this.__keepAlive||(super.destroy(),this.__filterPrompt&&(this.__filterPrompt.destroy(),this.__filterPrompt=null),this.__exportPrompt&&(this.__exportPrompt.destroy(),this.__exportPrompt=null),this.__detailsPrompt&&(this.__detailsPrompt.destroy(),this.__detailsPrompt=null))}__addLocalizedElement(element,key,...parameters){let info={key};if(0!==parameters.length&&(info.parameters=parameters),this.__localizedElements.set(element,info),this.__localizationReader){let localizedText=this.__localizationReader.get(key);info.parameters&&(localizedText=tchmi_format_string(localizedText,...info.parameters)),element.textContent=tchmi_decode_control_characters(localizedText)}}__removeLocalizedElement(element){this.__localizedElements.delete(element)}__setDataSymbol(){this.__isAttached?this.__serverInterval?this.__datagrid.setDataSymbol(new TcHmi.Symbol(`%s%TcHmiAuditTrail.GetAuditTrail|Interval=${this.__serverInterval}%/s%`)):this.__datagrid.setDataSymbol(new TcHmi.Symbol("%s%TcHmiAuditTrail.GetAuditTrail%/s%")):this.__datagrid.setDataSymbol(null)}__onSelectedItemChanged(){TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"SelectedEvent"}),TcHmi.EventProvider.raise(this.__id+".onSelectedItemChanged")}__onFilterPressed(){this.__filterPrompt||(this.__filterPrompt=new Controls.Helpers.FilterPrompt(TcHmi.Type.getSchema("tchmi:framework#/definitions/TcHmi.Controls.Beckhoff.AuditTrailUtils.TcHmiAuditTrailGrid.AuditTrailFilter"),this.__datagrid.getFilter()??[],this),this.__filterPrompt.setBackgroundAction({close:!0,action:"cancel"})),this.__filterPrompt.update(this.__datagrid.getFilter()??[],!tchmi_equal(this.__datagrid.getFilter()??[],this.__filterPrompt.getOriginalFilter())),this.__filterPrompt.prompt().then((newFilter=>{this.__datagrid.setFilter(newFilter)}))}__filterToString(filter){let result="";if(!filter.length)return result;for(let part of filter)Array.isArray(part)?result="("+this.__filterToString(part)+") ":TcHmi.isComparison(part)?result+=(part.path??"")+" "+part.comparator+' "'+part.value?.toString()+'" ':TcHmi.isLogicOperator(part)&&(result+="AND"===part.logic?"&& ":"|| ");return result}__onExportPressed(){if(!this.__exportPrompt){const buttonDictionary={},buttonTexts={};buttonDictionary.export={value:"export",attributes:{"data-tchmi-width":60,"data-tchmi-height":30}},buttonDictionary.close={value:"close",attributes:{"data-tchmi-width":60,"data-tchmi-height":30}},buttonTexts.export={text:"%l%Control::TcHmi.Controls.Beckhoff.AuditTrailUtils.TcHmiAuditTrailGrid::Button_Text_Export%/l%",tooltip:"%l%Control::TcHmi.Controls.Beckhoff.AuditTrailUtils.TcHmiAuditTrailGrid::Button_Tooltip_Export%/l%"},buttonTexts.close={text:"%l%Control::TcHmi.Controls.Beckhoff.AuditTrailUtils.TcHmiAuditTrailGrid::Button_Text_Close%/l%",tooltip:"%l%Control::TcHmi.Controls.Beckhoff.AuditTrailUtils.TcHmiAuditTrailGrid::Button_Tooltip_Close%/l%"},this.__exportPrompt=new Controls.Helpers.HtmlAndButtonsPrompt(buttonDictionary,this),this.__exportPrompt.setTexts({headerText:"%l%Control::TcHmi.Controls.Beckhoff.AuditTrailUtils.TcHmiAuditTrailGrid::Popup_Header_AuditTrailExport%/l%",buttons:buttonTexts}),this.__exportPrompt.setBackgroundAction({close:!0,action:"close"})}this.__updateExportPrompt(),this.__exportPrompt.prompt().then((value=>{if("export"===value){let limit=null,offset=null,orderBy=null;"Active"===this.__exportLimitCheckbox?.getToggleState()&&this.__exportLimitNumeric&&(limit=this.__exportLimitNumeric.getValue()??null),"Active"===this.__exportOffsetCheckbox?.getToggleState()&&this.__exportOffsetNumeric&&(offset=this.__exportOffsetNumeric.getValue()??null),"Active"===this.__exportOrderByCheckbox?.getToggleState()&&this.__exportOrderByInput&&(orderBy=this.__exportOrderByInput.getText()??null),this.__exportAuditTrail(this.__exportFormatCombobox?.getSelectedValue()??"json",limit,offset,orderBy,this.__exportFilter.length>0?this.__filterToString(this.__exportFilter):null)}}))}__updateExportPrompt(){if(this.__exportPrompt){if(this.__exportFilter=tchmi_clone_object(this.__datagrid.getFilter()??[]),!this.__elementExportPopupContainer){this.__elementExportPopupContainer=document.createElement("div"),this.__elementExportPopupContainer.classList.add("TcHmi_Controls_Beckhoff_AuditTrailUtils_TcHmiAuditTrailGrid-popup-export-container");let formatText=document.createElement("div");if(formatText.style.gridArea="1 / 1 / 1 / 1",formatText.classList.add("TcHmi_Controls_Beckhoff_AuditTrailUtils_TcHmiAuditTrailGrid-popup-export-text"),this.__elementExportPopupContainer.appendChild(formatText),this.__addLocalizedElement(formatText,"Export_Format"),!this.__exportFormatCombobox){let srcData=[{id:0,text:"json",value:"json"},{id:1,text:"csv",value:"csv"}];this.__exportFormatCombobox=TcHmi.Controls.get(this.getId()+".ExportFormatCombobox")??TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiCombobox",this.getId()+".ExportFormatCombobox",{"data-tchmi-src-data":srcData,"data-tchmi-selected-index":0},this)}if(!this.__exportFormatCombobox)return void TcHmi.Log.Controls.error(this,TcHmiAuditTrailGrid.#tchmiFQN,"Failed to create controls for the export prompt!");let exportFormatCombobox=this.__exportFormatCombobox.getElement()[0];exportFormatCombobox.style.gridArea="1 / 2 / 1 / 4",this.__elementExportPopupContainer.appendChild(exportFormatCombobox);let limitText=document.createElement("div");if(limitText.style.gridArea="2 / 1 / 2 / 1",limitText.classList.add("TcHmi_Controls_Beckhoff_AuditTrailUtils_TcHmiAuditTrailGrid-popup-export-text"),this.__elementExportPopupContainer.appendChild(limitText),this.__addLocalizedElement(limitText,"Export_Limit"),this.__exportLimitNumeric||(this.__exportLimitNumeric=TcHmi.Controls.get(this.getId()+".ExportLimitNumeric")??TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiNumericInput",this.getId()+".ExportLimitNumeric",{"data-tchmi-min-value":1,"data-tchmi-decimal-digits":0,"data-tchmi-value":200,"data-tchmi-reset-to-last-valid-value":!0},this)),!this.__exportLimitNumeric)return void TcHmi.Log.Controls.error(this,TcHmiAuditTrailGrid.#tchmiFQN,"Failed to create controls for the export prompt!");let exportLimitNumeric=this.__exportLimitNumeric.getElement()[0];if(exportLimitNumeric.style.gridArea="2 / 2 / 2 / 2",this.__elementExportPopupContainer.appendChild(exportLimitNumeric),this.__exportLimitCheckbox||(this.__exportLimitCheckbox=TcHmi.Controls.get(this.getId()+".ExportLimitCheckbox")??TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiCheckbox",this.getId()+".ExportLimitCheckbox",null,this)),!this.__exportLimitCheckbox)return void TcHmi.Log.Controls.error(this,TcHmiAuditTrailGrid.#tchmiFQN,"Failed to create controls for the export prompt!");let exportLimitCheckbox=this.__exportLimitCheckbox.getElement()[0];exportLimitCheckbox.style.gridArea="2 / 3 / 2 / 3",this.__elementExportPopupContainer.appendChild(exportLimitCheckbox),this.__exportLimitNumeric.setIsEnabled("Active"===this.__exportLimitCheckbox.getToggleState()),this.__destroyOnDestroy.push(TcHmi.EventProvider.register(this.__exportLimitCheckbox.getId()+".onStateChanged",(()=>{this.__exportLimitNumeric&&this.__exportLimitCheckbox&&this.__exportLimitNumeric.setIsEnabled("Active"===this.__exportLimitCheckbox.getToggleState())})));let offsetText=document.createElement("div");if(offsetText.style.gridArea="3 / 1 / 3 / 1",offsetText.classList.add("TcHmi_Controls_Beckhoff_AuditTrailUtils_TcHmiAuditTrailGrid-popup-export-text"),this.__elementExportPopupContainer.appendChild(offsetText),this.__addLocalizedElement(offsetText,"Export_Offset"),this.__exportOffsetNumeric||(this.__exportOffsetNumeric=TcHmi.Controls.get(this.getId()+".ExportOffsetNumeric")??TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiNumericInput",this.getId()+".ExportOffsetNumeric",{"data-tchmi-min-value":0,"data-tchmi-decimal-digits":0,"data-tchmi-value":0,"data-tchmi-reset-to-last-valid-value":!0},this)),!this.__exportOffsetNumeric)return void TcHmi.Log.Controls.error(this,TcHmiAuditTrailGrid.#tchmiFQN,"Failed to create controls for the export prompt!");let exportOffsetNumeric=this.__exportOffsetNumeric.getElement()[0];if(exportOffsetNumeric.style.gridArea="3 / 2 / 3 / 2",this.__elementExportPopupContainer.appendChild(exportOffsetNumeric),this.__exportOffsetCheckbox||(this.__exportOffsetCheckbox=TcHmi.Controls.get(this.getId()+".ExportOffsetCheckbox")??TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiCheckbox",this.getId()+".ExportOffsetCheckbox",null,this)),!this.__exportOffsetCheckbox)return void TcHmi.Log.Controls.error(this,TcHmiAuditTrailGrid.#tchmiFQN,"Failed to create controls for the export prompt!");let exportOffsetCheckbox=this.__exportOffsetCheckbox.getElement()[0];exportOffsetCheckbox.style.gridArea="3 / 3 / 3 / 3",this.__elementExportPopupContainer.appendChild(exportOffsetCheckbox),this.__exportOffsetNumeric.setIsEnabled("Active"===this.__exportOffsetCheckbox.getToggleState()),this.__destroyOnDestroy.push(TcHmi.EventProvider.register(this.__exportOffsetCheckbox.getId()+".onStateChanged",(()=>{this.__exportOffsetNumeric&&this.__exportOffsetCheckbox&&this.__exportOffsetNumeric.setIsEnabled("Active"===this.__exportOffsetCheckbox.getToggleState())})));let orderByText=document.createElement("div");if(orderByText.style.gridArea="4 / 1 / 4 / 1",orderByText.classList.add("TcHmi_Controls_Beckhoff_AuditTrailUtils_TcHmiAuditTrailGrid-popup-export-text"),this.__elementExportPopupContainer.appendChild(orderByText),this.__addLocalizedElement(orderByText,"Export_OrderBy"),this.__exportOrderByInput||(this.__exportOrderByInput=TcHmi.Controls.get(this.getId()+".ExportOrderByInput")??TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiInput",this.getId()+".ExportOrderByInput",null,this)),!this.__exportOrderByInput)return void TcHmi.Log.Controls.error(this,TcHmiAuditTrailGrid.#tchmiFQN,"Failed to create controls for the export prompt!");let exportOrderByInput=this.__exportOrderByInput.getElement()[0];if(exportOrderByInput.style.gridArea="4 / 2 / 4 / 2",this.__elementExportPopupContainer.appendChild(exportOrderByInput),this.__exportOrderByCheckbox||(this.__exportOrderByCheckbox=TcHmi.Controls.get(this.getId()+".ExportOrderByCheckbox")??TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiCheckbox",this.getId()+".ExportOrderByCheckbox",null,this)),!this.__exportOrderByCheckbox)return void TcHmi.Log.Controls.error(this,TcHmiAuditTrailGrid.#tchmiFQN,"Failed to create controls for the export prompt!");let exportOrderByCheckbox=this.__exportOrderByCheckbox.getElement()[0];exportOrderByCheckbox.style.gridArea="4 / 3 / 4 / 3",this.__elementExportPopupContainer.appendChild(exportOrderByCheckbox),this.__exportOrderByInput.setIsEnabled("Active"===this.__exportOrderByCheckbox.getToggleState()),this.__destroyOnDestroy.push(TcHmi.EventProvider.register(this.__exportOrderByCheckbox.getId()+".onStateChanged",(()=>{this.__exportOrderByInput&&this.__exportOrderByCheckbox&&this.__exportOrderByInput.setIsEnabled("Active"===this.__exportOrderByCheckbox.getToggleState())})));let filterText=document.createElement("div");if(filterText.style.gridArea="5 / 1 / 5 / 1",filterText.classList.add("TcHmi_Controls_Beckhoff_AuditTrailUtils_TcHmiAuditTrailGrid-popup-export-text"),this.__elementExportPopupContainer.appendChild(filterText),this.__addLocalizedElement(filterText,"Export_Filter"),!this.__exportFilterText){let filterDisplay=document.createElement("div");filterDisplay.classList.add("TcHmi_Controls_Beckhoff_AuditTrailUtils_TcHmiAuditTrailGrid-popup-export-filter-display"),this.__exportFilterText=document.createElement("div"),this.__exportFilterText.classList.add("TcHmi_Controls_Beckhoff_AuditTrailUtils_TcHmiAuditTrailGrid-popup-export-filter-value"),filterDisplay.appendChild(this.__exportFilterText),this.__elementExportPopupContainer.appendChild(filterDisplay)}if(this.__exportFilterButton||(this.__exportFilterButton=TcHmi.Controls.get(this.getId()+".ExportFilterButton")??TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.getId()+".ExportFilterButton",{"data-tchmi-text":"..."},this)),!this.__exportFilterButton)return void TcHmi.Log.Controls.error(this,TcHmiAuditTrailGrid.#tchmiFQN,"Failed to create controls for the export prompt!");let exportFilterButton=this.__exportFilterButton.getElement()[0];exportFilterButton.style.gridArea="5 / 3 / 5 / 3",this.__elementExportPopupContainer.appendChild(exportOffsetCheckbox),this.__destroyOnDestroy.push(TcHmi.EventProvider.register(this.__exportFilterButton.getId()+".onPressed",(()=>{this.__filterPrompt||(this.__filterPrompt=new Controls.Helpers.FilterPrompt(TcHmi.Type.getSchema("tchmi:framework#/definitions/TcHmi.Controls.Beckhoff.AuditTrailUtils.TcHmiAuditTrailGrid.AuditTrailFilter"),this.__datagrid.getFilter()??[],this),this.__filterPrompt.setBackgroundAction({close:!0,action:"cancel"})),this.__filterPrompt.update(this.__exportFilter??[],!tchmi_equal(this.__exportFilter??[],this.__filterPrompt.getOriginalFilter())),this.__filterPrompt.prompt().then((newFilter=>{this.__exportFilter=newFilter,this.__exportFilterText&&(this.__exportFilterText.textContent=this.__filterToString(this.__exportFilter))}))}))),this.__elementExportPopupContainer.appendChild(exportFilterButton),this.__exportPrompt.setContentElement(this.__elementExportPopupContainer)}if(this.__exportFilterText&&(this.__exportFilterText.textContent=this.__filterToString(this.__exportFilter)),this.__exportOrderByInput){let sorting=this.__datagrid.getSorting()?.map((info=>(info.name??"{value}")+" "+("Descending"===info.order?"DESC":"ASC"))).join(", ");this.__exportOrderByInput.setText(sorting??null)}}}__exportAuditTrail(format,limit,offset,orderBy,filter){let url=TcHmi.Environment.getHostBaseUri()+"/Config/ExtensionData/TcHmiAuditTrail";url+="?format="+format,filter&&(url+="&filter="+encodeURIComponent(filter)),limit&&(url+="&limit="+limit),offset&&(url+="&offset="+offset),orderBy&&(url+="&orderby="+encodeURIComponent(orderBy));let xhr=new XMLHttpRequest;xhr.responseType="blob",xhr.addEventListener("load",(_event=>{if(200!==xhr.status)TcHmi.Log.Controls.error(this,TcHmiAuditTrailGrid.#tchmiFQN,"Loading Audit Trail export data failed.");else{const blob=new Blob([xhr.response],{type:"application/zip"}),url=window.URL.createObjectURL(blob),a=document.createElement("a");a.href=url,a.download="AuditTrail-"+(new Date).toISOString().replace(/[:.]/g,"_")+".zip",a.click(),window.URL.revokeObjectURL(url)}}));const errorHandler=_event=>{0===xhr.status||TcHmi.Log.Controls.error(this,TcHmiAuditTrailGrid.#tchmiFQN,"Loading Audit Trail export data failed.")};xhr.addEventListener("error",errorHandler),xhr.addEventListener("abort",errorHandler),xhr.addEventListener("timeout",errorHandler),xhr.open("GET",tchmi_path(url)),xhr.send()}getSelectedAuditTrail(){return this.__datagrid?this.__datagrid.getSelectedRowValue():null}__onDoubleclick(event){if(!(event.target instanceof Element))return;let tableRow=event.target;for(;tableRow&&!tableRow.classList.contains("TcHmi_Controls_Beckhoff_TcHmiDatagrid-template-row")&&!tableRow.classList.contains("tchmi-datagrid-template-row");)tableRow=tableRow.parentElement;tableRow&&(TcHmi.EventProvider.raise(this.__id+".onItemDoubleClicked",this.getSelectedAuditTrail()),this.__showDetails())}__onTouchStart(event){if(!(event.target instanceof Element))return;let tableRow=event.target;for(;tableRow&&(!tableRow.classList.contains("TcHmi_Controls_Beckhoff_TcHmiDatagrid-template-row")||!tableRow.classList.contains("tchmi-datagrid-template-row"));)tableRow=tableRow.parentElement;let now=Date.now();tableRow&&(now-this.__doubletapStartTime<300?(TcHmi.EventProvider.raise(this.__id+".onItemDoubleClicked",this.getSelectedAuditTrail()),this.__showDetails(),this.__doubletapStartTime=0,event.preventDefault()):this.__doubletapStartTime=now)}__showDetails(){if(this.__allowDetailsPopup){if(!this.__detailsPrompt){const buttonDictionary={},buttonTexts={};buttonDictionary.close={value:"close",attributes:{"data-tchmi-width":60,"data-tchmi-height":30}},buttonTexts.close={text:"%l%Control::TcHmi.Controls.Beckhoff.AuditTrailUtils.TcHmiAuditTrailGrid::Button_Text_Close%/l%",tooltip:"%l%Control::TcHmi.Controls.Beckhoff.AuditTrailUtils.TcHmiAuditTrailGrid::Button_Tooltip_Close%/l%"},this.__detailsPrompt=new Controls.Helpers.HtmlAndButtonsPrompt(buttonDictionary,this),this.__detailsPrompt.setTexts({headerText:"%l%Control::TcHmi.Controls.Beckhoff.AuditTrailUtils.TcHmiAuditTrailGrid::Popup_Header_Details%/l%",buttons:buttonTexts}),this.__detailsPrompt.setBackgroundAction({close:!0,action:"close"})}this.__updateDetailsPrompt(),this.__detailsPrompt.prompt()}}__updateDetailsPrompt(){if(!this.__detailsPrompt)return;const createObjectDetails=data=>{let dl=document.createElement("dl");for(let key in data)if(data.hasOwnProperty(key)){let dt=document.createElement("dt");dl.appendChild(dt),dt.textContent=key.slice(0,1).toUpperCase()+key.slice(1).replace(/([A-Z]+)/g," $1");let dd=document.createElement("dd");dl.appendChild(dd);let value=data[key];if(null==value||""===value)dd.textContent="-";else if(value instanceof Date)dd.textContent=TcHmi.Localization.formatDate(value);else if("object"==typeof value)dd.appendChild(createObjectDetails(value));else if("string"==typeof value){let parsedJson=null;try{parsedJson=JSON.parse(value)}catch(ex){}if(parsedJson&&"object"==typeof parsedJson)dd.appendChild(createObjectDetails(parsedJson));else{let text=value;this.getIgnoreEscapeSequences()||(text=tchmi_decode_control_characters(text)),dd.textContent=text}}else dd.textContent=value}return dl},objectDetailList=createObjectDetails(this.__datagrid.getSelectedRowValue());this.__detailsPrompt.setContentElement(objectDetailList)}__onDatagridPropertyChanged(_event,data,...args){["CellContentPadding","Filter","GridFontFamily","GridFontSize","GridFontSizeUnit","GridFontStyle","GridFontWeight","HeaderBackgroundColor","HeaderCellPadding","HeaderHeight","HeaderHeightUnit","HeaderFontFamily","HeaderFontSize","HeaderFontSizeUnit","HeaderFontStyle","HeaderFontWeight","HeaderTextColor","RowClassesProvider","RowHeight","RowNumbersBackgroundColor","RowNumbersCellPadding","RowNumbersFontFamily","RowNumbersFontSize","RowNumbersFontSizeUnit","RowNumbersFontStyle","RowNumbersFontWeight","RowNumbersHorizontalAlignment","RowNumbersResizable","RowNumbersStartNumber","RowNumbersTextColor","RowNumbersVerticalAlignment","RowNumbersWidth","RowNumbersWidthUnit","ShowRowNumbers","Sorting","TableBorderColor","TableBorderStyle","TableBorderWidth"].includes(data.propertyName)&&TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{...data},...args)}setColumns(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("Columns"));let resolverInfo=this.__objectResolvers.get("columns");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue,this);this.__objectResolvers.set("columns",{resolver,watchCallback:this.__onResolverForColumnsWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForColumnsWatchCallback)})}__onResolverForColumnsWatchCallback(data){this.__isAttached||this.__suspendObjectResolver("columns"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__columns)||(this.__columns=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Columns"}),this.__processColumns()):TcHmi.Log.Controls.error(this,TcHmiAuditTrailGrid.#tchmiFQN,`Resolving symbols from object failed with error: ${TcHmi.Log.buildMessage(data.details)}`)}getColumns(){return this.__columns}__processColumns(){if(!this.__columns)return void this.__datagrid.setSrcColumn(null);const datagridColumns=[];for(const column of this.__columns)datagridColumns.push({name:column.customMessage??column.columnData??"",label:column.label??(column.columnData?`%l%Control::TcHmi.Controls.Beckhoff.AuditTrailUtils.TcHmiAuditTrailGrid::Datagrid_Header_${column.columnData?.replace(/::/g,"")}%/l%`:""),control:column.customMessage?"CustomMessage":"TextBlock",width:column.width,widthUnit:column.widthUnit,resize:column.resize,sortable:this.__isSortable(column.columnData),minWidth:column.minWidth,minWidthUnit:column.minWidthUnit,editable:!1,horizontalAlignment:column.horizontalAlignment,verticalAlignment:column.verticalAlignment,cellBackground:column.cellBackground,textColor:column.textColor,headerHorizontalAlignment:column.headerHorizontalAlignment,headerVerticalAlignment:column.verticalAlignment,format:column.format,ignoreEscapeSequences:column.ignoreEscapeSequences});this.__datagrid.setSrcColumn(datagridColumns)}__isSortable(column){switch(column){case"contextDomain":case"id":case"localizedText":case"name":case"payload::name":case"payload::domain":case"payload::severity":case"payload::timeRaised":case"processedEnd":case"processedStart":case"serverUid":case"sessionId":case"symbolVersion":case"timestamp":case"type":case"userName":return!0;default:return!1}}setFilter(valueNew){this.__datagrid.setFilter(valueNew),this.__initializedAttributes.includes("Filter")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Filter"}),this.__initializedAttributes.push("Filter"))}getFilter(){return this.__initializedAttributes.includes("Filter")?this.__datagrid.getFilter():void 0}setSorting(valueNew){this.__datagrid.setSorting(valueNew),this.__initializedAttributes.includes("Sorting")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Sorting"}),this.__initializedAttributes.push("Sorting"))}getSorting(){return this.__initializedAttributes.includes("Sorting")?this.__datagrid.getSorting():void 0}setServerInterval(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ServerInterval")),convertedValue!==this.__serverInterval&&(this.__serverInterval=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ServerInterval"}),this.__setDataSymbol())}getServerInterval(){return this.__serverInterval}setHeaderFontFamily(valueNew){this.__datagrid.setHeaderFontFamily(valueNew),this.__initializedAttributes.includes("HeaderFontFamily")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"HeaderFontFamily"}),this.__initializedAttributes.push("HeaderFontFamily"))}getHeaderFontFamily(){return this.__initializedAttributes.includes("HeaderFontFamily")?this.__datagrid.getHeaderFontFamily():void 0}setHeaderFontSize(valueNew){this.__datagrid.setHeaderFontSize(valueNew),this.__initializedAttributes.includes("HeaderFontSize")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"HeaderFontSize"}),this.__initializedAttributes.push("HeaderFontSize"))}getHeaderFontSize(){return this.__initializedAttributes.includes("HeaderFontSize")?this.__datagrid.getHeaderFontSize():void 0}setHeaderFontSizeUnit(valueNew){this.__datagrid.setHeaderFontSizeUnit(valueNew),this.__initializedAttributes.includes("HeaderFontSizeUnit")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"HeaderFontSizeUnit"}),this.__initializedAttributes.push("HeaderFontSizeUnit"))}getHeaderFontSizeUnit(){return this.__initializedAttributes.includes("HeaderFontSizeUnit")?this.__datagrid.getHeaderFontSizeUnit():void 0}setHeaderFontStyle(valueNew){this.__datagrid.setHeaderFontStyle(valueNew),this.__initializedAttributes.includes("HeaderFontStyle")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"HeaderFontStyle"}),this.__initializedAttributes.push("HeaderFontStyle"))}getHeaderFontStyle(){return this.__initializedAttributes.includes("HeaderFontStyle")?this.__datagrid.getHeaderFontStyle():void 0}setHeaderFontWeight(valueNew){this.__datagrid.setHeaderFontWeight(valueNew),this.__initializedAttributes.includes("HeaderFontWeight")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"HeaderFontWeight"}),this.__initializedAttributes.push("HeaderFontWeight"))}getHeaderFontWeight(){return this.__initializedAttributes.includes("HeaderFontWeight")?this.__datagrid.getHeaderFontWeight():void 0}setGridFontFamily(valueNew){this.__datagrid.setGridFontFamily(valueNew),this.__datagrid.setRowNumbersFontFamily(valueNew),this.__initializedAttributes.includes("GridFontFamily")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridFontFamily"}),this.__initializedAttributes.push("GridFontFamily"))}getGridFontFamily(){return this.__initializedAttributes.includes("GridFontFamily")?this.__datagrid.getGridFontFamily():void 0}setGridFontSize(valueNew){this.__datagrid.setGridFontSize(valueNew),this.__datagrid.setRowNumbersFontSize(valueNew),this.__initializedAttributes.includes("GridFontSize")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridFontSize"}),this.__initializedAttributes.push("GridFontSize"))}getGridFontSize(){return this.__initializedAttributes.includes("GridFontSize")?this.__datagrid.getGridFontSize():void 0}setGridFontSizeUnit(valueNew){this.__datagrid.setGridFontSizeUnit(valueNew),this.__datagrid.setRowNumbersFontSizeUnit(valueNew),this.__initializedAttributes.includes("GridFontSizeUnit")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridFontSizeUnit"}),this.__initializedAttributes.push("GridFontSizeUnit"))}getGridFontSizeUnit(){return this.__initializedAttributes.includes("GridFontSizeUnit")?this.__datagrid.getGridFontSizeUnit():void 0}setGridFontStyle(valueNew){this.__datagrid.setGridFontStyle(valueNew),this.__datagrid.setRowNumbersFontStyle(valueNew),this.__initializedAttributes.includes("GridFontStyle")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridFontStyle"}),this.__initializedAttributes.push("GridFontStyle"))}getGridFontStyle(){return this.__initializedAttributes.includes("GridFontStyle")?this.__datagrid.getGridFontStyle():void 0}setGridFontWeight(valueNew){this.__datagrid.setGridFontWeight(valueNew),this.__datagrid.setRowNumbersFontWeight(valueNew),this.__initializedAttributes.includes("GridFontWeight")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridFontWeight"}),this.__initializedAttributes.push("GridFontWeight"))}getGridFontWeight(){return this.__initializedAttributes.includes("GridFontWeight")?this.__datagrid.getGridFontWeight():void 0}setHeaderHeight(valueNew){this.__datagrid.setHeaderHeight(valueNew),this.__initializedAttributes.includes("HeaderHeight")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"HeaderHeight"}),this.__initializedAttributes.push("HeaderHeight"))}getHeaderHeight(){return this.__initializedAttributes.includes("HeaderHeight")?this.__datagrid.getHeaderHeight():void 0}setHeaderHeightUnit(valueNew){this.__datagrid.setHeaderHeightUnit(valueNew),this.__initializedAttributes.includes("HeaderHeightUnit")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"HeaderHeightUnit"}),this.__initializedAttributes.push("HeaderHeightUnit"))}getHeaderHeightUnit(){return this.__initializedAttributes.includes("HeaderHeightUnit")?this.__datagrid.getHeaderHeightUnit():void 0}setRowHeight(valueNew){this.__datagrid.setRowHeight(valueNew),this.__initializedAttributes.includes("RowHeight")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"RowHeight"}),this.__initializedAttributes.push("RowHeight"))}getRowHeight(){return this.__initializedAttributes.includes("RowHeight")?this.__datagrid.getRowHeight():void 0}getRowHeightUnit(){return"px"}setCellContentPadding(valueNew){this.__datagrid.setCellContentPadding(valueNew),this.__initializedAttributes.includes("CellContentPadding")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"CellContentPadding"}),this.__initializedAttributes.push("CellContentPadding"))}getCellContentPadding(){return this.__initializedAttributes.includes("CellContentPadding")?this.__datagrid.getCellContentPadding():void 0}setHeaderBackgroundColor(valueNew){this.__datagrid.setHeaderBackgroundColor(valueNew),this.__initializedAttributes.includes("HeaderBackgroundColor")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"HeaderBackgroundColor"}),this.__initializedAttributes.push("HeaderBackgroundColor"))}getHeaderBackgroundColor(){return this.__initializedAttributes.includes("HeaderBackgroundColor")?this.__datagrid.getHeaderBackgroundColor():void 0}setHeaderTextColor(valueNew){this.__datagrid.setHeaderTextColor(valueNew),this.__initializedAttributes.includes("HeaderTextColor")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"HeaderTextColor"}),this.__initializedAttributes.push("HeaderTextColor"))}getHeaderTextColor(){return this.__initializedAttributes.includes("HeaderTextColor")?this.__datagrid.getHeaderTextColor():void 0}setHeaderCellPadding(valueNew){this.__datagrid.setHeaderCellPadding(valueNew),this.__initializedAttributes.includes("HeaderCellPadding")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"HeaderCellPadding"}),this.__initializedAttributes.push("HeaderCellPadding"))}getHeaderCellPadding(){return this.__initializedAttributes.includes("HeaderCellPadding")?this.__datagrid.getHeaderCellPadding():void 0}setRowClassesProvider(valueNew){this.__datagrid.setRowClassesProvider(valueNew),this.__initializedAttributes.includes("RowClassesProvider")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"RowClassesProvider"}),this.__initializedAttributes.push("RowClassesProvider"))}getRowClassesProvider(){return this.__initializedAttributes.includes("RowClassesProvider")?this.__datagrid.getRowClassesProvider():void 0}setRowNumbersBackgroundColor(valueNew){this.__datagrid.setRowNumbersBackgroundColor(valueNew),this.__initializedAttributes.includes("RowNumbersBackgroundColor")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"RowNumbersBackgroundColor"}),this.__initializedAttributes.push("RowNumbersBackgroundColor"))}getRowNumbersBackgroundColor(){return this.__initializedAttributes.includes("RowNumbersBackgroundColor")?this.__datagrid.getRowNumbersBackgroundColor():void 0}setRowNumbersCellPadding(valueNew){this.__datagrid.setRowNumbersCellPadding(valueNew),this.__initializedAttributes.includes("RowNumbersCellPadding")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"RowNumbersCellPadding"}),this.__initializedAttributes.push("RowNumbersCellPadding"))}getRowNumbersCellPadding(){return this.__initializedAttributes.includes("RowNumbersCellPadding")?this.__datagrid.getRowNumbersCellPadding():void 0}setRowNumbersHorizontalAlignment(valueNew){this.__datagrid.setRowNumbersHorizontalAlignment(valueNew),this.__initializedAttributes.includes("RowNumbersHorizontalAlignment")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"RowNumbersHorizontalAlignment"}),this.__initializedAttributes.push("RowNumbersHorizontalAlignment"))}getRowNumbersHorizontalAlignment(){return this.__initializedAttributes.includes("RowNumbersHorizontalAlignment")?this.__datagrid.getRowNumbersHorizontalAlignment():void 0}setRowNumbersVerticalAlignment(valueNew){this.__datagrid.setRowNumbersVerticalAlignment(valueNew),this.__initializedAttributes.includes("RowNumbersVerticalAlignment")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"RowNumbersVerticalAlignment"}),this.__initializedAttributes.push("RowNumbersVerticalAlignment"))}getRowNumbersVerticalAlignment(){return this.__initializedAttributes.includes("RowNumbersVerticalAlignment")?this.__datagrid.getRowNumbersVerticalAlignment():void 0}setRowNumbersTextColor(valueNew){this.__datagrid.setRowNumbersTextColor(valueNew),this.__initializedAttributes.includes("RowNumbersTextColor")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"RowNumbersTextColor"}),this.__initializedAttributes.push("RowNumbersTextColor"))}getRowNumbersTextColor(){return this.__initializedAttributes.includes("RowNumbersTextColor")?this.__datagrid.getRowNumbersTextColor():void 0}setRowNumbersResizable(valueNew){this.__datagrid.setRowNumbersResizable(valueNew),this.__initializedAttributes.includes("RowNumbersResizable")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"RowNumbersResizable"}),this.__initializedAttributes.push("RowNumbersResizable"))}getRowNumbersResizable(){return this.__initializedAttributes.includes("RowNumbersResizable")?this.__datagrid.getRowNumbersResizable():void 0}setRowNumbersStartNumber(valueNew){this.__datagrid.setRowNumbersStartNumber(valueNew),this.__initializedAttributes.includes("RowNumbersStartNumber")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"RowNumbersStartNumber"}),this.__initializedAttributes.push("RowNumbersStartNumber"))}getRowNumbersStartNumber(){return this.__initializedAttributes.includes("RowNumbersStartNumber")?this.__datagrid.getRowNumbersStartNumber():void 0}setRowNumbersWidth(valueNew){this.__datagrid.setRowNumbersWidth(valueNew),this.__initializedAttributes.includes("RowNumbersWidth")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"RowNumbersWidth"}),this.__initializedAttributes.push("RowNumbersWidth"))}getRowNumbersWidth(){return this.__initializedAttributes.includes("RowNumbersWidth")?this.__datagrid.getRowNumbersWidth():void 0}setRowNumbersWidthUnit(valueNew){this.__datagrid.setRowNumbersWidthUnit(valueNew),this.__initializedAttributes.includes("RowNumbersWidthUnit")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"RowNumbersWidthUnit"}),this.__initializedAttributes.push("RowNumbersWidthUnit"))}getRowNumbersWidthUnit(){return this.__initializedAttributes.includes("RowNumbersWidthUnit")?this.__datagrid.getRowNumbersWidthUnit():void 0}setShowRowNumbers(valueNew){this.__datagrid.setShowRowNumbers(valueNew),this.__initializedAttributes.includes("ShowRowNumbers")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowRowNumbers"}),this.__initializedAttributes.push("ShowRowNumbers"))}getShowRowNumbers(){return this.__initializedAttributes.includes("ShowRowNumbers")?this.__datagrid.getShowRowNumbers():void 0}setTableBorderColor(valueNew){this.__datagrid.setTableBorderColor(valueNew),this.__initializedAttributes.includes("TableBorderColor")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TableBorderColor"}),this.__initializedAttributes.push("TableBorderColor"))}getTableBorderColor(){return this.__initializedAttributes.includes("TableBorderColor")?this.__datagrid.getTableBorderColor():void 0}setTableBorderWidth(valueNew){this.__datagrid.setTableBorderWidth(valueNew),this.__initializedAttributes.includes("TableBorderWidth")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TableBorderWidth"}),this.__initializedAttributes.push("TableBorderWidth"))}getTableBorderWidth(){return this.__initializedAttributes.includes("TableBorderWidth")?this.__datagrid.getTableBorderWidth():void 0}setTableBorderStyle(valueNew){this.__datagrid.setTableBorderStyle(valueNew),this.__initializedAttributes.includes("TableBorderStyle")||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TableBorderStyle"}),this.__initializedAttributes.push("TableBorderStyle"))}getTableBorderStyle(){return this.__initializedAttributes.includes("TableBorderStyle")?this.__datagrid.getTableBorderStyle():void 0}setIgnoreEscapeSequences(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("IgnoreEscapeSequences")),convertedValue!==this.__ignoreEscapeSequences&&(this.__ignoreEscapeSequences=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"IgnoreEscapeSequences"}),this.__processColumns())}getIgnoreEscapeSequences(){return this.__ignoreEscapeSequences}setAllowDetailsPopup(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("AllowDetailsPopup")),convertedValue!==this.__allowDetailsPopup&&(this.__allowDetailsPopup=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"AllowDetailsPopup"}),this.__processAllowDetailsPopup())}getAllowDetailsPopup(){return this.__allowDetailsPopup}__processAllowDetailsPopup(){}setShowMenuBar(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ShowMenuBar")),convertedValue!==this.__showMenuBar&&(this.__showMenuBar=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowMenuBar"}),this.__processShowMenuBar())}getShowMenuBar(){return this.__showMenuBar}__processShowMenuBar(){this.__showMenuBar?(TcHmi.StyleProvider.setSimpleElementStyle(this.__elementMenuBar,"display",null),this.__fixVerticalMenuBarWidth()):TcHmi.StyleProvider.setSimpleElementStyle(this.__elementMenuBar,"display","none")}setMenuBarPosition(valueNew){let convertedValue=TcHmi.ValueConverter.toString(valueNew);(null===convertedValue||"Top"!==convertedValue&&"Bottom"!==convertedValue&&"Left"!==convertedValue&&"Right"!==convertedValue)&&(convertedValue=this.getAttributeDefaultValueInternal("MenuBarPosition")),convertedValue!==this.__menuBarPosition&&(this.__menuBarPosition=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"MenuBarPosition"}),this.__processMenuBarPosition())}getMenuBarPosition(){return this.__menuBarPosition}__processMenuBarPosition(){switch(this.__menuBarPosition){case"Top":TcHmi.StyleProvider.setSimpleElementStyle(this.__elementTemplateRoot,"flex-direction",null),TcHmi.StyleProvider.setSimpleElementStyle(this.__elementMenuBar,"flex-direction",null);break;case"Bottom":TcHmi.StyleProvider.setSimpleElementStyle(this.__elementTemplateRoot,"flex-direction","column-reverse"),TcHmi.StyleProvider.setSimpleElementStyle(this.__elementMenuBar,"flex-direction",null);break;case"Left":TcHmi.StyleProvider.setSimpleElementStyle(this.__elementTemplateRoot,"flex-direction","row"),TcHmi.StyleProvider.setSimpleElementStyle(this.__elementMenuBar,"flex-direction","column");break;case"Right":TcHmi.StyleProvider.setSimpleElementStyle(this.__elementTemplateRoot,"flex-direction","row-reverse"),TcHmi.StyleProvider.setSimpleElementStyle(this.__elementMenuBar,"flex-direction","column")}this.__fixVerticalMenuBarWidth()}setButtonHeight(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ButtonHeight")),convertedValue!==this.__buttonHeight&&(this.__buttonHeight=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ButtonHeight"}),this.__processButtonHeight())}getButtonHeight(){return this.__buttonHeight}__processButtonHeight(){this.__filterButton.setHeight(this.__buttonHeight??null),this.__filterButton.setWidth(void 0!==this.__buttonHeight?this.__buttonHeight:null),this.__exportButton.setHeight(this.__buttonHeight??null),this.__exportButton.setWidth(void 0!==this.__buttonHeight?this.__buttonHeight:null),this.__fixVerticalMenuBarWidth()}getButtonHeightUnit(){return"px"}__fixVerticalMenuBarWidth(){}}})();AuditTrailUtils.TcHmiAuditTrailGrid=TcHmiAuditTrailGrid}(Beckhoff.AuditTrailUtils||(Beckhoff.AuditTrailUtils={}))}(Controls.Beckhoff||(Controls.Beckhoff={}))}(TcHmi.Controls||(TcHmi.Controls={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("TcHmiAuditTrailGrid","TcHmi.Controls.Beckhoff.AuditTrailUtils",TcHmi.Controls.Beckhoff.AuditTrailUtils.TcHmiAuditTrailGrid);