export const domElementsCache=new Map;export function removeGarbageElements(ctx){const elementsOfContext=domElementsCache.get(ctx);if(elementsOfContext){for(const[entry,cacheElements]of elementsOfContext){for(const cacheElement of cacheElements)cacheElement.isConnected||(entry.domElements.delete(cacheElement),cacheElements.delete(cacheElement));0===cacheElements.size&&elementsOfContext.delete(entry)}0===elementsOfContext.size&&domElementsCache.delete(ctx)}}export function addDomElement(ctx,entry,valueEl,errorEl){if(!entry)return void TcHmi.Log.warn("You have tried to add an online element to an entry, that do not exist.");if(!valueEl&&!errorEl)return void TcHmi.Log.warn("You have tried to add an element, that do not exist.");let elementsOfContext=domElementsCache.get(ctx);elementsOfContext||(elementsOfContext=new Map,domElementsCache.set(ctx,elementsOfContext));let domElementsOfEntry=elementsOfContext.get(entry);domElementsOfEntry||(domElementsOfEntry=new Set,elementsOfContext.set(entry,domElementsOfEntry)),valueEl&&(entry.domElements.add(valueEl),domElementsOfEntry.add(valueEl)),errorEl&&(entry.errorElements?.add(errorEl),domElementsOfEntry.add(errorEl)),setOnlineData(entry)}export function setOnlineData(entry,value){if(void 0===entry)return;void 0!==value&&(entry.value=value);let valueLabel=entry.value;for(const el of entry.domElements)if(el.textContent!==valueLabel&&!(valueLabel instanceof Set)){null===valueLabel?void 0!==el.dataset.noPlaceholder?valueLabel="":(el.classList.add("no-value"),valueLabel="-"):el.classList.remove("no-value");const valueString=valueLabel.toString();if(el.textContent!==valueString){if("-"!==el.textContent&&""!==el.textContent){const highlightDuration=2e3;el.classList.add("change-highlight"),el.dataset.highlightTimeout&&clearTimeout(parseInt(el.dataset.highlightTimeout,10)),el.dataset.highlightTimeout=setTimeout(()=>{el.classList.remove("change-highlight"),el.dataset.highlightTimeout=void 0},highlightDuration).toString()}el.textContent=valueString}}}