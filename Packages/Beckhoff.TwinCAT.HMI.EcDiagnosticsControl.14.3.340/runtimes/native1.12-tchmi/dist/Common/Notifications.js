export class Notifications{constructor(destinationElement){this.__wrapper=document.createElement("div"),this.__wrapper.classList.add("notifications-wrapper"),destinationElement.appendChild(this.__wrapper)}__wrapper;__notifications=new Map;resetNotification(key){}clearAllNotifications(){for(const note of this.__notifications.values())this.__removeNotification(note)}clearNotifications(category,level){if(void 0===category)this.clearAllNotifications();else{const notification=this.__notifications.get(category);notification&&this.__removeNotification(notification)}}__removeNotification(notification){clearInterval(notification.timeout),notification.element.remove(),this.__checkForDuplicatedNotifications()}static createErrorElement(ecdiagnostics,localization,text,level){const msgWrapper=document.createElement("div");msgWrapper.classList.add("notification-wrapper-v2");const msgLevelIcon=document.createElement("div");msgLevelIcon.classList.add("icon-wrapper");let iconSource="";switch(level){case NotificationLevel.info:iconSource="",msgWrapper.classList.add("level-info");break;case NotificationLevel.success:msgWrapper.classList.add("level-success"),iconSource="";break;case NotificationLevel.warning:msgWrapper.classList.add("level-warning"),iconSource=`${ecdiagnostics.commonPath}/Icons/feather-sprite.svg#alert-triangle`;break;case NotificationLevel.error:msgWrapper.classList.add("level-error"),iconSource="";break;default:TcHmi.Log.error(`Unknown notification level ${level}.`)}msgLevelIcon.innerHTML=`<svg class="feather"><use href="${iconSource}"></use></svg>`;const msg=localization.createLocalizedElement(text);msg.classList.add("msg");const closeBtn=document.createElement("div");return closeBtn.classList.add("close-btn"),closeBtn.innerHTML=`<svg class="feather"><use href="${ecdiagnostics.commonPath}/Icons/feather-sprite.svg#x"></use></svg>`,closeBtn.addEventListener("click",()=>{msgWrapper.remove()}),msgWrapper.append(msgLevelIcon,msg,closeBtn),msgWrapper}setNotificationElement(el,level,category,displayTime){}setNotification(content,level,category,displayTime){let element,notification=this.__notifications.get(category);notification&&this.__removeNotification(notification),content instanceof HTMLElement?element=content:(element=document.createElement("div"),element.innerHTML=content),element.classList.add("notifications-wrapper-category"),element.classList.add("notifications-wrapper-"+NotificationLevel[level]),notification={element,timeout:void 0},notification.element.classList.add("notifications-wrapper-category"),notification.element.classList.add("notifications-wrapper-"+NotificationLevel[level]),this.__wrapper.appendChild(notification.element),displayTime&&(notification.element.classList.add("disappearing"),notification.timeout=setTimeout(()=>{notification&&(notification.element.remove(),this.__checkForDuplicatedNotifications())},displayTime)),this.__notifications.set(category,notification),this.__checkForDuplicatedNotifications()}__checkForDuplicatedNotifications(){const compareNotes=[];for(const note of this.__notifications.values()){let hide=!1;for(const compareNote of compareNotes)if(compareNote===note.element.innerHTML){hide=!0;break}hide?note.element.style.display="none":note.element.style.removeProperty("display"),compareNotes.push(note.element.innerHTML)}}create(key,localization,params={}){const msg=document.createElement("span");switch(key){case"target-available-now":localization.addElement(msg,"Msg_Target_Available_Now",[`<b>${params.target.name}</b> (${params.target.netId})`]),this.setNotification(msg,NotificationLevel.info,NotificationCategory.task);break;case"target-not-available":localization.addElement(msg,"Msg_Target_Not_Available",[`<b>${params.target.name}</b> (${params.target.netId})`]),this.setNotification(msg,NotificationLevel.error,NotificationCategory.task);break;case"target-no-longer-available":localization.addElement(msg,"Msg_Target_No_Longer_Available",[`<b>${params.target.name}</b> (${params.target.netId})`]),this.setNotification(msg,NotificationLevel.error,NotificationCategory.task);break;case"waiting-for-target-availability":localization.addElement(msg,"Msg_Target_Waiting_For_Availability",[`<b>${params.target.name}</b> (${params.target.netId})`]),this.setNotification(msg,NotificationLevel.info,NotificationCategory.task);break;case"master-found":localization.addElement(msg,"Msg_Master_Found",[`<b>${params.master.name}</b> (${params.master.netId})`,`<b>${params.target.name}</b> (${params.target.netId})`]),this.setNotification(msg,NotificationLevel.info,NotificationCategory.task);break;case"master-not-found":localization.addElement(msg,"Msg_Master_Not_Found",[`<b>${params.master.netId}</b>`,`<b>${params.target.name}</b> (${params.target.netId})`]),this.setNotification(msg,NotificationLevel.error,NotificationCategory.task);break;case"init-network-view":localization.addElement(msg,"Msg_Network_View_Init",[`<b>${params.master.name}</b> (${params.master.netId})`,`<b>${params.target.name}</b> (${params.target.netId})`]),this.setNotification(msg,NotificationLevel.info,NotificationCategory.task);break;case"sucessfully-display-network-view":localization.addElement(msg,"Msg_Network_View_Loaded",[`<b>${params.master.name}</b> (${params.master.netId})`,`<b>${params.target.name}</b> (${params.target.netId})`]),this.setNotification(msg,NotificationLevel.success,NotificationCategory.task,4e3);break;default:TcHmi.Log.error(`Unknown notification key '${key}'.`)}}}export var NotificationLevel;!function(NotificationLevel){NotificationLevel[NotificationLevel.info=0]="info",NotificationLevel[NotificationLevel.success=1]="success",NotificationLevel[NotificationLevel.warning=2]="warning",NotificationLevel[NotificationLevel.error=3]="error"}(NotificationLevel||(NotificationLevel={}));export var NotificationCategory;!function(NotificationCategory){NotificationCategory[NotificationCategory.task=0]="task",NotificationCategory[NotificationCategory.ws=1]="ws"}(NotificationCategory||(NotificationCategory={}));